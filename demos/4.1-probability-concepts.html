<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4.1 Probability Concepts &amp; Rules</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
</head>
<body>
  <header>
    <h1>Unit 4: Probability and Statistical Inference</h1>
    <p class="subtitle">4.1 — Probability Concepts and Rules</p>
  </header>

  <main class="demo-page">
    <a href="../index.html" class="back-link">← Back to all sections</a>

    <h1>4.1: Probability Concepts and Rules</h1>

    <div class="concept-block">
      <h2>What You'll Learn</h2>
      <ul>
        <li>Define sample space, events, and basic probability rules</li>
        <li>Combine events with union, intersection, and complement</li>
        <li>Use conditional probability, joint probability, and check independence</li>
      </ul>
      <p><strong>When to use:</strong> Any situation with uncertain outcomes. These rules underpin all later topics—Bayes (4.2), random variables (4.3+), and statistical inference (4.6–4.8).</p>
      <p><strong>Prerequisites:</strong> None. This is the foundation.</p>
    </div>

    <div class="content-section">
      <h2>Definitions</h2>
      <p><strong>Probability</strong> is a numerical value (0 to 1) that measures how likely an event is to occur. An <strong>experiment</strong> is a process with uncertain outcomes. The <strong>sample space</strong> \(S\) is the set of all possible outcomes. An <strong>event</strong> is any subset of \(S\).</p>
      <p><strong>Exhaustive events</strong> cover all outcomes. <strong>Mutually exclusive events</strong> share no outcomes (if one occurs, the others cannot).</p>
    </div>

    <div class="content-section">
      <h2>Venn Diagram &amp; Set Operations</h2>
      <p>Sample space \(S\) is the rectangle; events \(A\) and \(B\) are circles.</p>
      <ul>
        <li>Union \(A \cup B\) — at least one occurs</li>
        <li>Intersection \(A \cap B\) — both occur</li>
        <li>Complement \(A^c\) — \(A\) does not occur</li>
      </ul>
      <div class="formula">\[ 0 \leq P(A) \leq 1, \quad P(S) = 1, \quad P(A^c) = 1 - P(A) \]</div>
    </div>

    <div class="content-section">
      <h2>Addition Rule</h2>
      <p>Probability that \(A\) or \(B\) occurs (at least one):</p>
      <div class="formula">\[ P(A \cup B) = P(A) + P(B) - P(A \cap B) \]</div>
      <p>The joint \(P(A \cap B)\) is subtracted because it is counted in both \(P(A)\) and \(P(B)\).</p>
    </div>

    <div class="content-section">
      <h2>Conditional &amp; Joint Probability</h2>
      <p>Conditional: \(P(A|B)\) = probability of \(A\) given that \(B\) occurred.</p>
      <div class="formula">\[ P(A|B) = \frac{P(A \cap B)}{P(B)} \quad \Rightarrow \quad P(A \cap B) = P(A|B) \cdot P(B) \]</div>
    </div>

    <div class="content-section">
      <h2>Independence</h2>
      <p>Events \(A\) and \(B\) are <strong>independent</strong> if \(P(A|B) = P(A)\), or equivalently \(P(A \cap B) = P(A) \cdot P(B)\).</p>
    </div>

    <!-- Interactive demos -->
    <h2 style="margin-top: 2rem;">Interactive Demos</h2>

    <div class="demo-box">
      <h3>Interactive Venn Diagram</h3>
      <p>Adjust \(P(A)\), \(P(B)\), and \(P(A \cap B)\). Values must satisfy: \(P(A \cap B) \leq \min(P(A), P(B))\) and \(P(A) + P(B) - P(A \cap B) \leq 1\).</p>
      <div class="input-row">
        <div class="input-group">
          <label>\(P(A)\)</label>
          <input type="number" id="vennPA" value="0.5" min="0" max="1" step="0.05">
        </div>
        <div class="input-group">
          <label>\(P(B)\)</label>
          <input type="number" id="vennPB" value="0.4" min="0" max="1" step="0.05">
        </div>
        <div class="input-group">
          <label>\(P(A \cap B)\)</label>
          <input type="number" id="vennPAB" value="0.2" min="0" max="1" step="0.05">
        </div>
      </div>
      <div class="result" id="vennResult">
        \(P(A \cup B)\) = <span id="vennUnion">0.70</span> &nbsp;|&nbsp;
        \(P(A^c)\) = <span id="vennAc">0.50</span> &nbsp;|&nbsp;
        \(P(A|B)\) = <span id="vennAgB">0.50</span>
      </div>
      <div id="vennWarn" class="result" style="display:none; color: var(--warning);"></div>
      <svg id="vennSvg" width="400" height="220" viewBox="0 0 400 220" style="display:block; margin:1rem auto;">
        <rect width="400" height="220" fill="#1a1b26" stroke="rgba(255,255,255,0.15)" stroke-width="1"/>
        <text x="200" y="18" fill="#a9b1d6" font-size="12" text-anchor="middle">S (sample space)</text>
        <ellipse id="vennA" cx="140" cy="110" rx="80" ry="70" fill="rgba(122,162,247,0.35)" stroke="#7aa2f7" stroke-width="1.5"/>
        <ellipse id="vennB" cx="260" cy="110" rx="80" ry="70" fill="rgba(187,154,247,0.35)" stroke="#bb9af7" stroke-width="1.5"/>
        <text id="vennLabelA" x="95" y="115" fill="#c0caf5" font-size="13" font-weight="600">A only</text>
        <text id="vennLabelB" x="285" y="115" fill="#c0caf5" font-size="13" font-weight="600">B only</text>
        <text id="vennLabelAB" x="200" y="110" fill="#c0caf5" font-size="12" text-anchor="middle">A∩B</text>
        <text id="vennLabelOut" x="200" y="195" fill="#a9b1d6" font-size="11" text-anchor="middle">neither</text>
      </svg>
    </div>

    <div class="demo-box">
      <h3>Complement Rule</h3>
      <p><strong>Story:</strong> At an open house, 37% of female attendees will purchase a gym membership. What is the probability a randomly selected female will not purchase? \(P(A^c) = 1 - P(A)\).</p>
      <label>\(P(A)\) = probability of purchase</label>
      <input type="range" id="pA" min="0" max="100" value="37" step="1">
      <span id="pAVal">0.37</span>
      <div class="result"><span class="value">\(P(A^c)\)</span> = <span id="pAc">0.63</span></div>
    </div>

    <div class="demo-box">
      <h3>Addition Rule — Anthony's Grades</h3>
      <p><strong>Story:</strong> Anthony estimates his chances: 75% for an A in Statistics, 55% in Managerial Economics, and 40% for an A in both. What is the probability he gets an A in at least one? \(A_S\) = A in Statistics, \(A_M\) = A in Managerial Economics.</p>
      <div class="input-row">
        <div class="input-group">
          <label>\(P(A_S)\)</label>
          <input type="number" id="pAs" value="0.75" min="0" max="1" step="0.01">
        </div>
        <div class="input-group">
          <label>\(P(A_M)\)</label>
          <input type="number" id="pAm" value="0.55" min="0" max="1" step="0.01">
        </div>
        <div class="input-group">
          <label>\(P(A_S \cap A_M)\)</label>
          <input type="number" id="pAsAm" value="0.40" min="0" max="1" step="0.01">
        </div>
      </div>
      <div class="result">
        \(P(A_S \cup A_M)\) = <span id="union">0.90</span><br>
        \(P(\text{neither})\) = <span id="neither">0.10</span>
      </div>
    </div>

    <div class="demo-box">
      <h3>Conditional Probability — Economist (Countries A &amp; B)</h3>
      <p><strong>Story:</strong> An economist predicts 60% chance country A performs poorly, 25% for country B, and 16% for both. Given B performs poorly, what is the chance A does too? \(P(A|B) = P(A \cap B) / P(B)\).</p>
      <div class="input-row">
        <div class="input-group">
          <label>\(P(A)\)</label>
          <input type="number" id="pA_econ" value="0.60" min="0" max="1" step="0.01">
        </div>
        <div class="input-group">
          <label>\(P(B)\)</label>
          <input type="number" id="pB_econ" value="0.25" min="0" max="1" step="0.01">
        </div>
        <div class="input-group">
          <label>\(P(A \cap B)\)</label>
          <input type="number" id="pAB_econ" value="0.16" min="0" max="1" step="0.01">
        </div>
      </div>
      <div class="result">\(P(A|B)\) = <span id="pAgB">0.64</span></div>
    </div>

    <div class="demo-box">
      <h3>Joint from Conditional — Social Media Loyalty</h3>
      <p><strong>Story:</strong> A manager believes 14% of consumers respond positively to the firm's social media, and 24% of those who respond become loyal. What is the probability the next recipient responds positively and becomes loyal? \(P(R \cap L) = P(L|R) \cdot P(R)\).</p>
      <div class="input-row">
        <div class="input-group">
          <label>\(P(R)\) — positive response</label>
          <input type="number" id="pR" value="0.14" min="0" max="1" step="0.01">
        </div>
        <div class="input-group">
          <label>\(P(L|R)\) — loyal given response</label>
          <input type="number" id="pLgR" value="0.24" min="0" max="1" step="0.01">
        </div>
      </div>
      <div class="result">\(P(R \cap L)\) = <span id="pRL">0.0336</span></div>
    </div>

    <div class="demo-box">
      <h3>Independence Check — Computer Crashes</h3>
      <p><strong>Story:</strong> 2% chance desktop crashes, 6% laptop, 0.12% both. Are the two independent? If so, one crashing doesn't change the other's probability. \(P(D \cap L) = P(D) \cdot P(L)\).</p>
      <div class="input-row">
        <div class="input-group">
          <label>\(P(D)\)</label>
          <input type="number" id="pD" value="0.02" min="0" max="1" step="0.001">
        </div>
        <div class="input-group">
          <label>\(P(L)\)</label>
          <input type="number" id="pL" value="0.06" min="0" max="1" step="0.001">
        </div>
        <div class="input-group">
          <label>\(P(D \cap L)\)</label>
          <input type="number" id="pDL" value="0.0012" min="0" max="1" step="0.0001">
        </div>
      </div>
      <div class="result">
        \(P(D) \cdot P(L)\) = <span id="product">0.0012</span><br>
        \(P(D \cap L)\) = <span id="joint">0.0012</span><br>
        <strong id="indep">Independent</strong>
      </div>
    </div>
  </main>

  <footer><a href="../index.html">← Back to all sections</a></footer>

  <script src="../js/shared.js"></script>
  <script src="../js/flare.js"></script>
  <script>
    function parseVal(id, def) {
      const v = parseFloat(document.getElementById(id)?.value);
      return isNaN(v) ? def : v;
    }

    // Complement
    const pASlider = document.getElementById('pA');
    const pAVal = document.getElementById('pAVal');
    const pAc = document.getElementById('pAc');
    function updateComplement() {
      const p = pASlider.value / 100;
      pAVal.textContent = p.toFixed(2);
      pAc.textContent = (1 - p).toFixed(2);
    }
    pASlider.addEventListener('input', updateComplement);

    // Addition rule
    ['pAs','pAm','pAsAm'].forEach(id => document.getElementById(id).addEventListener('input', updateAddition));
    function updateAddition() {
      const pAs = parseVal('pAs', 0.75), pAm = parseVal('pAm', 0.55), pAsAm = parseVal('pAsAm', 0.4);
      const union = Math.min(1, Math.max(0, pAs + pAm - pAsAm));
      document.getElementById('union').textContent = union.toFixed(2);
      document.getElementById('neither').textContent = (1 - union).toFixed(2);
    }

    // Conditional
    ['pA_econ','pB_econ','pAB_econ'].forEach(id => document.getElementById(id).addEventListener('input', updateCond));
    function updateCond() {
      const pB = parseVal('pB_econ', 0.25), pAB = parseVal('pAB_econ', 0.16);
      const pAgB = pB > 0 ? pAB / pB : 0;
      document.getElementById('pAgB').textContent = pAgB.toFixed(2);
    }

    // Joint from conditional
    ['pR','pLgR'].forEach(id => document.getElementById(id).addEventListener('input', updateJoint));
    function updateJoint() {
      const pR = parseVal('pR', 0.14), pLgR = parseVal('pLgR', 0.24);
      document.getElementById('pRL').textContent = (pR * pLgR).toFixed(4);
    }

    // Independence
    ['pD','pL','pDL'].forEach(id => document.getElementById(id).addEventListener('input', updateIndep));
    function updateIndep() {
      const pD = parseVal('pD', 0.02), pL = parseVal('pL', 0.06), pDL = parseVal('pDL', 0.0012);
      const product = pD * pL;
      document.getElementById('product').textContent = product.toFixed(4);
      document.getElementById('joint').textContent = pDL.toFixed(4);
      const isIndep = Math.abs(pDL - product) < 0.0001;
      const indep = document.getElementById('indep');
      indep.textContent = isIndep ? 'Independent' : 'Dependent';
      indep.style.color = isIndep ? 'var(--success)' : 'var(--warning)';
      if (isIndep && typeof showFlare === 'function') {
        showFlare('ZAP', indep.closest('.demo-box'), { size: 'small', key: 'indep' });
      }
    }

    let vennWasValid = false;
    function updateVenn() {
      const pA = parseVal('vennPA', 0.5), pB = parseVal('vennPB', 0.4), pAB = parseVal('vennPAB', 0.2);
      const valid = pAB <= Math.min(pA, pB) && pA + pB - pAB <= 1;
      const warn = document.getElementById('vennWarn');
      const result = document.getElementById('vennResult');
      if (!valid) {
        warn.style.display = 'block';
        result.style.opacity = '0.5';
        if (pAB > Math.min(pA, pB)) warn.textContent = 'Invalid: P(A∩B) must be ≤ min(P(A), P(B))';
        else warn.textContent = 'Invalid: P(A)+P(B)-P(A∩B) must be ≤ 1';
        vennWasValid = false;
      } else {
        if (!vennWasValid && typeof showFlare === 'function') {
          showFlare('BOOM', document.getElementById('vennSvg'), { size: 'small', key: 'venn' });
        }
        vennWasValid = true;
        warn.style.display = 'none';
        result.style.opacity = '1';
        const union = pA + pB - pAB;
        const pAgB = pB > 0 ? pAB / pB : 0;
        document.getElementById('vennUnion').textContent = union.toFixed(2);
        document.getElementById('vennAc').textContent = (1 - pA).toFixed(2);
        document.getElementById('vennAgB').textContent = pAgB.toFixed(2);
        document.getElementById('vennLabelA').textContent = (pA - pAB).toFixed(2);
        document.getElementById('vennLabelB').textContent = (pB - pAB).toFixed(2);
        document.getElementById('vennLabelAB').textContent = pAB.toFixed(2);
        document.getElementById('vennLabelOut').textContent = (1 - union).toFixed(2) + ' (neither)';
      }
    }
    ['vennPA','vennPB','vennPAB'].forEach(id => document.getElementById(id).addEventListener('input', updateVenn));

    updateComplement(); updateAddition(); updateCond(); updateJoint(); updateIndep(); updateVenn();
  </script>
</body>
</html>
